---
import type { BlogPost } from '../types/BlogPost';
import { getCollection } from 'astro:content';
import DesktopPostSingle from './DesktopPostSingle';

const posts = (await getCollection('blog'))
  .filter((post) => post.data.editorsChoice === true)
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime());
---

<h1 class="hidden md:flex h1 mytext-base pt-28 mb-5">EDITOR'S CHOICE</h1>
<div class="hidden w-full md:grid md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 md:gap-5">
  {
    posts.map((post: BlogPost) => (
      <DesktopPostSingle
        title={post.data.title}
        titleAppend={post.data.titleAppend}
        author={post.data.author}
        slug={post.data.slug}
        image={post.data.image}
        category={post.data.category}
        categoryLink={post.data.categoryLink}
        createdAt={post.data.pubDate}
      />
    ))
  }
</div>
